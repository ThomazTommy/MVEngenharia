<div id="detalheInspecao" th:replace="inspecao/detalheInspecao"></div>
<div class="row">
	<div class="col-lg-12">
		<div class="panel panel-default">

			<div class="panel-body">
				<div>
					<ul th:if="${Erro} != null" class="errorlist">
						<li th:text="${Erro}">Dados Incorretos</li>
					</ul>

				</div>
				
				<div th:if="${not #lists.isEmpty(inspecao.relatorios)}">

					<p>Relatorios não esta vazio</p>
					<div th:each="obj : ${inspecao.relatorios}">

						<dt th:text="#{relatorio.dataInicioRelatorio}"></dt>
						<dd th:text="${{obj.dataInicioRelatorio}}"></dd>

						<dt th:text="#{relatorio.funcionarioRelator}"></dt>
						<dd th:text="${{obj.funcionarioRelator.nomeFuncionario}}"></dd>

						<div th:if="${obj.dataFimRelatorio} != null">

							<dt th:text="#{relatorio.dataFimRelatorio}"></dt>
							<dd th:text="${{obj.dataFimRelatorio}}"></dd>

							<dt th:text="#{relatorio.naoConformidades}"></dt>

							<dd th:if="${#lists.isEmpty(obj.naoConformidades)}">Nenhuma
								Não-Conformidade Cadastrada
							</dd>
							<dd th:each="nc:${obj.naoConformidades}" th:text="${nc.descNaoConformidade}"></dd>
						</div>

						<div th:if="${obj.dataFimRelatorio} == null">


							<form role="form" class='usaAjax' action="#"
								th:action="@{/relatorio/} + ${inspecao.idInspecao}"
								th:object="${relatorio}" method="post">
								<fieldset>
									<div class="row">
										<div class="col-lg-12">
											<ul th:if="${#fields.hasErrors('*')}" class="errorlist">
												<li th:each="err : ${#fields.errors('*')}" th:text="${err}">Dados
													Incorretos</li>
											</ul>
										</div>
										<div class="col-lg-12">
											<input type="hidden" id="idRelatorio" name="idRelatorio" th:value="${{obj.idRelatorio}}"/>
											<input type="hidden" id="dataInicioRelatorio" name="dataInicioRelatorio" th:value="${{obj.dataInicioRelatorio}}"/>
											<input type="hidden" id="funcionarioRelator.cpf" name="funcionarioRelator.cpf" th:value="${obj.funcionarioRelator.cpf}"/>
											<div class="form-group">
												<label for="naoConformidades"><span th:text="#{relatorio.naoConformidades}">Ramos</span></label>
												<div class="checkbox" th:each="obj_ : ${allNaoConformidades}">
													<label> <input type="checkbox" th:field="*{naoConformidades}"
														th:value="${obj_.idNaoConformidade}" /> <span
														th:for="${#ids.prev('naoConformidades')}" th:text="${obj_.descNaoConformidade}">ramos</span></label>
												</div>
											</div>
										</div>
									</div>
									<button class="btn btn-default" type="submit" name="save"
										onclick="formSubmitClick(this,'detalheInspecao')"
										th:text="#{relatorio.salvar}">Add Inspecao</button>
								</fieldset>
							</form>
						</div>
					</div>
				</div>

				<div th:if="${#lists.isEmpty(inspecao.relatorios)}">

					<p>Relatorios esta vazio</p>

					<button type="button" class="btn btn-success"
						th:onClick="'executaAjaxGet(\'/relatorio/iniciarNovoRelatorio/' + ${inspecao.idInspecao} + '\', \'detalheInspecao\', \'\', \'\')'">
						<i class="fa fa-check"></i>Iniciar Novo Relatório
					</button>

				</div>

			</div>
		</div>
	</div>
</div>



